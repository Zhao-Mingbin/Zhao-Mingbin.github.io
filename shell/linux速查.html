<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>linux速查</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Homepage</a></li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> shell 编程</div></li><li class="chapter-item expanded "><a href="../shell/shell编程.html"><strong aria-hidden="true">3.</strong> shell 编程</a></li><li class="chapter-item expanded "><a href="../shell/bash_shell编程实践.html"><strong aria-hidden="true">4.</strong> bash shell编程实践</a></li><li class="chapter-item expanded "><a href="../shell/linux速查.html" class="active"><strong aria-hidden="true">5.</strong> linux速查</a></li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> C++学习</div></li><li class="chapter-item expanded "><a href="../C++学习/C++基础带目录.html"><strong aria-hidden="true">7.</strong> C++基础</a></li><li class="chapter-item expanded "><a href="../C++学习/C++进阶带目录.html"><strong aria-hidden="true">8.</strong> C++进阶</a></li><li class="spacer"></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> CFD学习</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../CFD学习/latex数学公式.html"><strong aria-hidden="true">9.1.</strong> latex数学公式</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="linux-常用命令行速查手册"><a class="header" href="#linux-常用命令行速查手册">Linux 常用命令行速查手册</a></h1>
<p>基于 2019 年圣诞节发布的 <strong>Linux mint 19.3</strong> 发行版，采用的 Shell 命令解释器版本为 <strong>Bash Shell 5.0.3</strong>，文章总结了笔者日常所经常使用到的 Linux 命令，在简明扼要的介绍相关命令与参数之后，还展示了各条命令的实际执行结果，便于读者更加直观的了解其功能与用途。限于文章篇幅以及命令行的使用频率，有关 Bash Shell 脚本编程部分的内容，将会新开一篇文章再行介绍。</p>
<p><img src="linux%E9%80%9F%E6%9F%A5/media/logo-16326334485471.png" alt="img" /></p>
<p><img src="linux%E9%80%9F%E6%9F%A5/media/vi-vim-cheat-sheet-16326334597992.gif" alt="img" /></p>
<h2 id="tree"><a class="header" href="#tree">tree</a></h2>
<p>以树形格式列出指定目录的内容，可以用于在命令行当中展示目录结构。</p>
<ul>
<li><code>-L</code> 需要显示的最大目录树深度;</li>
<li><code>--dirsfirst</code> 优先显示目录;</li>
</ul>
<pre><code class="language-sh">➜  aves git:(master) ✗ tree -L 1 server  sources --dirsfirst
server
├── common
├── dashboard
├── login
├── system
└── app.js
sources
├── assets
├── common
├── dashboard
├── demo
├── layout
├── login
├── app.js
└── index.html
</code></pre>
<h2 id="ls"><a class="header" href="#ls">ls</a></h2>
<p>查看当前目录下的文件。</p>
<ul>
<li><code>-al</code> 查看当前目录下的文件列表（包括隐藏的）。</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ ls -al
drwxrwxr-x   9 hank hank   4096 8月  31 00:02 .
drwxrwxrwx   4 root root   4096 8月  24 03:15 ..
-rw-rw-r--   1 hank hank   1966 8月  26 18:56 _config.yml
-rw-rw-r--   1 hank hank 505845 8月  31 00:02 db.json
drwxrwxr-x  13 hank hank   4096 8月  31 00:02 .deploy_git
drwxrwxr-x   8 hank hank   4096 8月  31 00:18 .git
-rw-rw-r--   1 hank hank     83 8月  26 02:29 .gitignore
-rw-rw-r--   1 hank hank    277 8月  24 03:15 index.html
drwxrwxr-x 302 hank hank  12288 8月  26 02:29 node_modules
-rw-rw-r--   1 hank hank    610 8月  26 02:29 package.json
-rw-rw-r--   1 hank hank  90061 8月  26 02:29 package-lock.json
drwxrwxr-x  12 hank hank   4096 8月  31 00:02 public
-rw-rw-r--   1 hank hank    203 8月  24 03:15 README.md
drwxrwxr-x   2 hank hank   4096 8月  24 03:15 scaffolds
drwxrwxr-x   6 hank hank   4096 8月  24 03:15 source
drwxrwxr-x   3 hank hank   4096 8月  24 03:15 themes
</code></pre>
<h2 id="cd"><a class="header" href="#cd">cd</a></h2>
<p>切换目录。</p>
<ul>
<li><code>/</code> 表示根目录；</li>
<li><code>.</code> 表示当前目录；</li>
<li><code>..</code>代表上层目录；</li>
<li><code>~</code> 代表用户主目录；</li>
<li><code>-</code> 代表上次工作目录；</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ cd -
/workspace/blog/source
➜  source git:(master) ✗ cd -
/workspace/blog
</code></pre>
<h2 id="pwd"><a class="header" href="#pwd">pwd</a></h2>
<p>查看当前路径。</p>
<pre><code class="language-sh">➜  blog git:(master) ✗ pwd
/workspace/blog
</code></pre>
<h2 id="mkdir"><a class="header" href="#mkdir">mkdir</a></h2>
<p>创建目录。</p>
<ul>
<li><code>-m</code> 创建目录的同时指定访问权限；</li>
<li><code>-p</code> 如果所创建目录的父目录不存在，则创建父目录；</li>
</ul>
<pre><code class="language-sh">➜  mkdir -pm 777 /workspace/linux
</code></pre>
<h2 id="rmdir"><a class="header" href="#rmdir">rmdir</a></h2>
<p>删除空目录。</p>
<ul>
<li><code>-p</code> 如果删除目录的父目录也为空，则删除父目录；</li>
</ul>
<pre><code class="language-sh">➜  sudo rmdir /workspace/linux
</code></pre>
<blockquote>
<p>zshell 中可以缺省<code>-p</code>属性。</p>
</blockquote>
<h2 id="rm--mv--cp"><a class="header" href="#rm--mv--cp">rm / mv / cp</a></h2>
<p>文件操作相关的 3 个命令。</p>
<h3 id="rm"><a class="header" href="#rm">rm</a></h3>
<p>删除目录和文件。</p>
<ul>
<li><code>-f</code> 强制删除，无需用户确认；</li>
<li><code>-i</code> 删除前需要确认；</li>
<li><code>-r</code> 递归删除；</li>
<li><code>-v</code> 显示删除过程；</li>
</ul>
<pre><code class="language-sh">➜  linux ls
file1  file2  file3
➜  linux rm -rvi file*
rm：是否删除普通空文件 'file1'？ y
已删除'file1'
rm：是否删除普通空文件 'file2'？ y
已删除'file2'
rm：是否删除普通空文件 'file3'？ y
已删除'file3'
</code></pre>
<h3 id="mv"><a class="header" href="#mv">mv</a></h3>
<p>移动文件，或者修改文件的名称。</p>
<pre><code class="language-sh">➜  mv file file1
</code></pre>
<h3 id="cp"><a class="header" href="#cp">cp</a></h3>
<p>复制文件。</p>
<ul>
<li><code>-a</code> 保留链接、文件属性并递归复制，等同于<code>-dpR</code>，常用用于复制目录；</li>
<li><code>-d</code> 复制时保留链接；</li>
<li><code>-f</code> 若目标文件存在，直接删除不提示；</li>
<li><code>-i</code> 若目标文件存在，需要用户确认操作，与<code>-f</code>相反；</li>
<li><code>-p</code> 复制文件内容的同时，还复制了文件的访问权限与修改时间；</li>
<li><code>-r</code> 递归复制；</li>
<li><code>-v</code> 显示文件复制过程；</li>
</ul>
<pre><code class="language-sh">➜  cp -a file1 file2  ./demo
</code></pre>
<h2 id="touch"><a class="header" href="#touch">touch</a></h2>
<p>创建空文件。</p>
<pre><code class="language-sh">➜  linux touch file1 file2 file3
➜  linux ll
总用量 0
-rw-rw-r-- 1 hank hank 0 8月  31 00:47 file1
-rw-rw-r-- 1 hank hank 0 8月  31 00:47 file2
-rw-rw-r-- 1 hank hank 0 8月  31 00:47 file3
</code></pre>
<h2 id="echo"><a class="header" href="#echo">echo</a></h2>
<p>输出一行文本。</p>
<pre><code class="language-sh">➜  linux echo &quot;Hello Hank&quot; &gt;&gt; file
➜  linux head file
Hello Hank
</code></pre>
<blockquote>
<p><strong>输出重定向</strong>是指将命令的标准输出重定向到指定文件中去。</p>
</blockquote>
<ul>
<li><code>&gt;</code> 输出到一个新文件；</li>
<li><code>&gt;&gt;</code> 输出到现有文件末尾，如果文件不存在则创建新文件；</li>
</ul>
<h2 id="file"><a class="header" href="#file">file</a></h2>
<p>查看文件类型，以及二进制文件的详细信息（<em>包括处理器体系结构</em>）。</p>
<pre><code class="language-sh">➜  blog git:(master) ✗ file *
_config.yml:       ASCII text
db.json:           UTF-8 Unicode text, with very long lines, with no line terminators
index.html:        HTML document, ASCII text, with CRLF line terminators
node_modules:      directory
package.json:      ASCII text
package-lock.json: ASCII text
public:            directory
README.md:         ASCII text
scaffolds:         directory
source:            directory
themes:            directory
</code></pre>
<h2 id="more--less"><a class="header" href="#more--less">more / less</a></h2>
<p>浏览文本文件，<em>空格</em>翻页，<em>q</em>退出。</p>
<pre><code class="language-sh">➜  blog git:(master) ✗ more index.html
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;test&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<blockquote>
<p><strong>注意</strong>：<code>less</code>命令功能更加丰富，支持键盘翻页键，可以向前先后任意翻页浏览，并支持文本搜索，例如输入<code>/abc</code>可在文本中搜索字符串<code>abc</code>。</p>
</blockquote>
<h2 id="head--tail"><a class="header" href="#head--tail">head / tail</a></h2>
<p>查看文件头部或尾部，默认显示 10 行。</p>
<ul>
<li><code>-n</code> [数字] 显示[数字]所指定的行数；</li>
<li><code>-c</code> [数字] 显示[数字]所指定的字节数；</li>
<li><code>-f</code> 显示[指定文件]底部新增加的信息，可用于向控制台实时输出日志信息；</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ head -n4 index.html
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;

➜  blog git:(master) ✗ tail -f package.json
    &quot;hexo-generator-search&quot;: &quot;^2.4.0&quot;,
    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,
    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,
    &quot;hexo-server&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-symbols-count-time&quot;: &quot;^0.6.3&quot;
  },
  &quot;devDependencies&quot;: {}
}
</code></pre>
<h2 id="cat"><a class="header" href="#cat">cat</a></h2>
<p>将一个或多个文件输出到标准输出。</p>
<ul>
<li><code>-n</code> 从 1 开始对输出行进行编号；</li>
<li><code>-b</code> 类似于<code>-n</code>，从 1 开始编号，但忽略空白行；</li>
<li><code>-s</code> 遇到连续两行或以上的空白行，就替换为一行空白行；</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ cat -n index.html &gt;&gt; /workspace/linux/test.html
➜  blog git:(master) ✗ cat /workspace/linux/test.html
1  &lt;!DOCTYPE html&gt;
2  &lt;html lang=&quot;en&quot;&gt;
3  &lt;head&gt;
4    &lt;meta charset=&quot;UTF-8&quot;&gt;
5    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
6    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
7    &lt;title&gt;Document&lt;/title&gt;
8  &lt;/head&gt;
9  &lt;body&gt;
10   &lt;h1&gt;test&lt;/h1&gt;
11 &lt;/body&gt;
12 &lt;/html&gt;
</code></pre>
<blockquote>
<p><strong>注意</strong>：通过<code>cat</code>和重定向搭配使用，可以完成将多个文件合并为一个新文件的操作。</p>
</blockquote>
<pre><code class="language-sh">➜  cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 142
model name	: Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz
... ... ...
➜  cat /proc/version
Linux version 4.12.2-041202-generic (kernel@gloin) (gcc version 6.3.0 20170618 (Ubuntu 6.3.0-19ubuntu1) ) #201707150832 SMP Sat Jul 15 12:34:02 UTC 2017
</code></pre>
<blockquote>
<p><strong>注意</strong>：<code>cat</code>命令也可用于查看 CPU、内核版本等系统信息。</p>
</blockquote>
<h2 id="ln"><a class="header" href="#ln">ln</a></h2>
<p>创建链接。</p>
<ul>
<li><strong>硬链接</strong>：<code>ln</code>命令默认创建的是硬链接，通过索引节点进行链接，相当于源文件的镜像，占用源文件同样大小的空间，修改其中一个，另外一个也会进行相同改动。</li>
</ul>
<blockquote>
<p>硬链接<strong>不能</strong>跨文件系统。</p>
</blockquote>
<pre><code class="language-sh">➜  ls -l
总用量 0
-rw-rw-r-- 1 hank hank 0 8月  31 02:20 file
➜  ln file ./shortcut
➜  ls -l
总用量 0
-rw-rw-r-- 2 hank hank 0 8月  31 02:20 file
-rw-rw-r-- 2 hank hank 0 8月  31 02:20 shortcut
</code></pre>
<ul>
<li><strong>软链接</strong>：加上<code>-s</code>选项可以创建软链接，会产生一个链接文件，该文件指向目标文件的位置，类似于 Windows 下的快捷方式。</li>
</ul>
<pre><code class="language-sh">➜  ls -l
总用量 0
-rw-rw-r-- 1 hank hank 0 8月  31 02:20 file
➜  ln -s file  ./shortcut
➜  ls -l
总用量 0
-rw-rw-r-- 1 hank hank 0 8月  31 02:20 file
lrwxrwxrwx 1 hank hank 4 8月  31 02:22 shortcut -&gt; file
</code></pre>
<blockquote>
<p><strong>注意</strong>：软链接可以跨文件系统使用。</p>
</blockquote>
<h2 id="chmod"><a class="header" href="#chmod">chmod</a></h2>
<p>改变文件的权限。</p>
<table><thead><tr><th></th><th>User（拥有者）</th><th>Group（同组用户）</th><th>Other（其它用户）</th></tr></thead><tbody>
<tr><td><strong>权限</strong></td><td>可读、可写、可执行</td><td>可读、可写、可执行</td><td>可读、可写、可执行</td></tr>
<tr><td><strong>字符</strong></td><td><code>r</code>、<code>w</code>、<code>x</code></td><td><code>r</code>、<code>w</code>、<code>x</code></td><td><code>r</code>、<code>w</code>、<code>x</code></td></tr>
<tr><td><strong>数字</strong></td><td><code>4</code>、<code>2</code>、<code>1</code></td><td><code>4</code>、<code>2</code>、<code>1</code></td><td><code>4</code>、<code>2</code>、<code>1</code></td></tr>
</tbody></table>
<ul>
<li><strong>数字表示法</strong>：文件权限的数字表示是由<code>读</code>、<code>写</code>、<code>执行</code>3 个权限数字相加，并按照<code>拥有者</code>、<code>组成员</code>、<code>其它</code>的顺序排列而来。</li>
</ul>
<pre><code class="language-sh">➜  sudo chmod 753 file
➜  ls -l
总用量 0
-rwxr-x-wx 1 hank hank 0 8月  31 02:20 file
</code></pre>
<ul>
<li><strong>字符表示法</strong>： 字母<code>u</code>、<code>g</code>、<code>o</code>分别表示文件的<code>拥有者</code>、<code>同组用户</code>、<code>其它用户</code>，而<code>r</code>、<code>w</code>、<code>x</code>则表示文件的<code>可读</code>、<code>可写</code>、<code>可执行</code>权限，符号<code>+</code>、<code>-</code>分别表示<code>增加</code>或者<code>去除</code>某种权限。</li>
</ul>
<pre><code class="language-sh">➜  sudo chmod u+rwx,g+wr,o-wrx file
➜  ls -l
总用量 0
-rwxrw---- 1 hank hank 0 8月  31 02:38 file
</code></pre>
<blockquote>
<p><strong>注意</strong>：拥有可执行权限的文件，在 Linux 终端下通常呈现为绿色。另外可以通过<code>chmod +x file</code>方便快捷的为<code>user</code>、<code>group</code>、<code>other</code>增加可执行权限。</p>
</blockquote>
<h2 id="chown--chgrp"><a class="header" href="#chown--chgrp">chown / chgrp</a></h2>
<p>修改指定文件的所有者关系，但是也可以修改其所属组的关系。</p>
<h3 id="chown"><a class="header" href="#chown">chown</a></h3>
<p>修改文件的所有者、所属组关系。</p>
<pre><code class="language-sh">➜  ls -l
-rwxrwxrwx 1 hank hank 148100671 7月   1 15:05 config.atom.zip
➜  sudo chown root config.atom.zip
➜  ls -l
-rwxrwxrwx 1 root hank 148100671 7月   1 15:05 config.atom.zip
</code></pre>
<p>通过使用<code>:</code>符号可以同时修改文件所有者和所属组。</p>
<pre><code class="language-sh">➜  ~ ll -l
-rwxrwxrwx 1 hank hank 156M 7月   1 15:05 config.vscode.zip
➜  ~ sudo chown root:root config.vscode.zip
➜  ~ ls -l
-rwxrwxrwx 1 root root 162986482 7月   1 15:05 config.vscode.zip
</code></pre>
<h3 id="chgrp"><a class="header" href="#chgrp">chgrp</a></h3>
<p>修改文件的所属组关系。</p>
<pre><code class="language-sh">➜  ls -l
-rwxrwxrwx 1 root hank 148100671 7月   1 15:05 config.atom.zip
➜  sudo chgrp root config.atom.zip
➜  ls -l
-rwxrwxrwx 1 root root 148100671 7月   1 15:05 config.atom.zip
</code></pre>
<h2 id="ftp"><a class="header" href="#ftp">ftp</a></h2>
<p>Internet 文件传输协议，默认端口为<strong>21</strong>，因为存在诸多性能和安全性问题，目前正在逐步放弃使用。</p>
<pre><code class="language-sh">➜  ftp ftp1.linuxidc.com
Connected to ftp1.linuxidc.com.
220-BBSFTP Pro- [http://redcheek.net/bbsftp]
220 Serv-U FTP Server v6.4 for WinSock ready...
Name (ftp1.linuxidc.com:hank):
</code></pre>
<blockquote>
<p><strong>注意</strong>：新版本的 Chrome 已经不再支持<code>ftp://</code>作为前缀的资源路径。</p>
</blockquote>
<h2 id="ssh"><a class="header" href="#ssh">ssh</a></h2>
<p>OpenSSH 的 SSH 客户端实现，用于登陆远程主机并执行命令行，默认端口<strong>22</strong>，是一种加密的传输方式。</p>
<pre><code class="language-sh">➜  ssh root@192.168.1.2
</code></pre>
<h2 id="telnet"><a class="header" href="#telnet">telnet</a></h2>
<p>TELNET 协议的用户接口，属于另外一种登陆远程主机的方式，默认端口为<strong>23</strong>，采用非加密的明文传输。</p>
<pre><code class="language-sh">➜  telnet 192.168.1.2
</code></pre>
<h2 id="netstat"><a class="header" href="#netstat">netstat</a></h2>
<p>显示网络连接、路由表、接口统计、伪装连接、多播成员信息。</p>
<pre><code class="language-shell">➜  netstat -tcp
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 192.168.0.4:41966       sc.10086.com.defa:https ESTABLISHED 18133/chrome
tcp        0      0 192.168.0.4:39476       user.128.220.139.p:http ESTABLISHED 18133/chrome
... ... ...
</code></pre>
<p>执行如下的命令，可以查看指定网络端口的进程占用情况：</p>
<pre><code class="language-sh">netstat -aon | grep 4000
  TCP    0.0.0.0:4000           0.0.0.0:0              LISTENING       12464
  TCP    [::]:4000              [::]:0                 LISTENING       12464
</code></pre>
<blockquote>
<p><strong>注意</strong>：相似功能的还有<code>ss</code>、<code>ip</code>命令。</p>
</blockquote>
<h2 id="ifconfig"><a class="header" href="#ifconfig">ifconfig</a></h2>
<p>配置和查看网卡信息。</p>
<ul>
<li><code>up</code> 激活指定网卡<code>ifconfig eth0 up</code>；</li>
<li><code>down</code> 关闭指定网卡<code>ifconfig eth0 down</code>；</li>
</ul>
<pre><code class="language-sh">➜  /workspace ifconfig
enp3s0    Link encap:以太网  硬件地址 18:db:f2:3d:08:a2
          UP BROADCAST MULTICAST  MTU:1500  跃点数:1
          接收数据包:0 错误:0 丢弃:0 过载:0 帧数:0
          发送数据包:0 错误:0 丢弃:0 过载:0 载波:0
          碰撞:0 发送队列长度:1000
          接收字节:0 (0.0 B)  发送字节:0 (0.0 B)

lo        Link encap:本地环回
          inet 地址:127.0.0.1  掩码:255.0.0.0
          inet6 地址: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  跃点数:1
          接收数据包:11341 错误:0 丢弃:0 过载:0 帧数:0
          发送数据包:11341 错误:0 丢弃:0 过载:0 载波:0
          碰撞:0 发送队列长度:1000
          接收字节:38060900 (38.0 MB)  发送字节:38060900 (38.0 MB)

wlp2s0    Link encap:以太网  硬件地址 98:54:1b:23:7b:c0
          inet 地址:192.168.0.4  广播:192.168.0.255  掩码:255.255.255.0
          inet6 地址: fe80::8f47:deee:640c:d14b/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1
          接收数据包:84743 错误:0 丢弃:0 过载:0 帧数:0
          发送数据包:48721 错误:0 丢弃:0 过载:0 载波:0
          碰撞:0 发送队列长度:1000
          接收字节:99129124 (99.1 MB)  发送字节:16185986 (16.1 MB)
</code></pre>
<h2 id="ping"><a class="header" href="#ping">ping</a></h2>
<p>测试到目标主机的网络是否畅通。</p>
<pre><code class="language-sh">➜  blog git:(master) ✗ ping 192.168.0.1
PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.
64 bytes from 192.168.0.1: icmp_seq=1 ttl=64 time=3.33 ms
64 bytes from 192.168.0.1: icmp_seq=2 ttl=64 time=2.13 ms
64 bytes from 192.168.0.1: icmp_seq=3 ttl=64 time=2.23 ms
</code></pre>
<h2 id="free"><a class="header" href="#free">free</a></h2>
<p>查看操作系统内存使用情况。</p>
<pre><code class="language-sh">➜  free
              total        used        free      shared  buff/cache   available
Mem:       12110732     1996616     2339832      380248     7774284     9356872
Swap:      12389372           0    12389372
</code></pre>
<h2 id="df"><a class="header" href="#df">df</a></h2>
<p>查看文件系统磁盘空间的使用。</p>
<pre><code class="language-sh">➜  df
文件系统           1K-块      已用      可用 已用% 挂载点
udev             6032356         0   6032356    0% /dev
tmpfs            1211076      9768   1201308    1% /run
/dev/sdb1      110743360  15959824  89135000   16% /
tmpfs            6055364     32508   6022856    1% /dev/shm
tmpfs               5120         4      5116    1% /run/lock
tmpfs            6055364         0   6055364    0% /sys/fs/cgroup
cgmfs                100         0       100    0% /run/cgmanager/fs
tmpfs            1211076        68   1211008    1% /run/user/1000
/dev/sda3      511999996 400954728 111045268   79% /media/hank/media
/dev/sda2      204799996 137228808  67571188   68% /media/hank/develop
/dev/sdc1       15099432   4246304  10853128   29% /media/hank/CCSA_X64FRE
</code></pre>
<h2 id="du"><a class="header" href="#du">du</a></h2>
<p>评估文件的磁盘空间占用情况，下面的命令可以查看当前目录下所有文件的磁盘占用大小。</p>
<pre><code class="language-sh">➜  du --max-depth=1 -h
16M     ./static
560M    .
</code></pre>
<h2 id="fdisk"><a class="header" href="#fdisk">fdisk</a></h2>
<p>操作磁盘分区表。</p>
<ul>
<li><code>-l</code> 列出磁盘的分区表。</li>
</ul>
<pre><code class="language-sh">➜  sudo fdisk -l
Disk /dev/sda: 931.5 GiB, 1000204886016 bytes, 1953525168 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0x97c43a12

设备       启动      Start     末尾     扇区   Size Id 类型
/dev/sda1  *          2048  204802047  204800000  97.7G  7 HPFS/NTFS/exFAT
/dev/sda2        204802048  614402047  409600000 195.3G  7 HPFS/NTFS/exFAT
/dev/sda3        614402048 1638402047 1024000000 488.3G  7 HPFS/NTFS/exFAT
/dev/sda4       1638402048 1953521663  315119616 150.3G  7 HPFS/NTFS/exFAT

Disk /dev/sdb: 119.2 GiB, 128035676160 bytes, 250069680 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0xf8545dc0

设备       启动     Start    末尾    扇区   Size Id 类型
/dev/sdb1            2048 225288191 225286144 107.4G 83 Linux
/dev/sdb2       225290238 250068991  24778754  11.8G  5 扩展
/dev/sdb5       225290240 250068991  24778752  11.8G 82 Linux 交换 / Solaris
</code></pre>
<h2 id="mount--umount"><a class="header" href="#mount--umount">mount / umount</a></h2>
<p>Linux 允许多个文件系统共存，也允许在系统运行时挂载当前内核提供支持的文件系统。</p>
<h3 id="mount"><a class="header" href="#mount">mount</a></h3>
<p>挂载文件系统至指定目录，可以通过<code>-t</code>参数指定挂载的文件系统类型：</p>
<ol>
<li><code>ext/ext2/ext3/ext4</code> Linux 常用文件系统</li>
<li><code>msdos</code> MS-DOS 的 FAT，即 FAT16</li>
<li><code>vfat</code> Windows 的 FAT 或 FAT32</li>
<li><code>nfs</code> 网络文件系统</li>
<li><code>ntfs</code> Windows 的 NTFS</li>
<li><code>auto</code> 自动检测文件系统</li>
</ol>
<pre><code class="language-sh">➜  sudo mount -t ntfs /dev/sdc1 /workspace/linux
</code></pre>
<p>如果需要让所有用户具备挂载分区的读写权限，则可以执行如下命令进行<code>mount</code>操作：</p>
<pre><code class="language-sh">➜  sudo mount -o umask=0 /dev/sda1 /workspace/linux
</code></pre>
<h3 id="umount"><a class="header" href="#umount">umount</a></h3>
<p>卸载指定目录下挂载的文件系统。</p>
<pre><code class="language-sh">➜  sudo umount /dev/sdc1
</code></pre>
<blockquote>
<p>嵌入式开发中常用的文件系统还有 cramfs、jffs2（<em>NOR Flash</em>）、yaffs/yaffs2（<em>NAND Flash</em>）。</p>
</blockquote>
<h2 id="lsmod--insmod--rmmod"><a class="header" href="#lsmod--insmod--rmmod">lsmod / insmod / rmmod</a></h2>
<p>Linux 内核时可以动态加载、卸载模块（<em>例如驱动程序模块</em>）。</p>
<h3 id="lsmod"><a class="header" href="#lsmod">lsmod</a></h3>
<p>查看当前 Linux 内核已经加载的模块，该命令实际是列出/proc/modules 目录下的内容。</p>
<pre><code class="language-sh">➜  lsmod
Module                  Size  Used by
nls_iso8859_1          16384  0
uas                    24576  0
usb_storage            69632  2 uas
cmac                   16384  1
rfcomm                 77824  14
ccm                    20480  6
rtsx_usb_ms            20480  0
memstick               16384  1 rtsx_usb_ms
... ... ...
</code></pre>
<h3 id="insmod"><a class="header" href="#insmod">insmod</a></h3>
<p>向内核插入模块。</p>
<p>如下代码向内核插入驱动模块<code>driver.ko</code>。</p>
<pre><code class="language-sh">➜  insmod driver.ko
</code></pre>
<blockquote>
<p><strong>注意</strong>：<code>.ko</code>是内核模块文件的后缀名。</p>
</blockquote>
<p>插入模块时可以通过<code>insmod</code>命令向模块传入参数，</p>
<pre><code class="language-sh">➜  insmod test.ko time=2017
</code></pre>
<blockquote>
<p><strong>注意</strong>：如果模块版本与内核不一致，模块将无法插入系统，虽然可以使用<code>-f</code>参数强制插入，但可能会引起错误。</p>
</blockquote>
<h3 id="rmmod"><a class="header" href="#rmmod">rmmod</a></h3>
<p>将模块从内核中卸载，并释放所占用的系统资源。</p>
<pre><code class="language-sh">➜  rmmod test.ko
</code></pre>
<blockquote>
<p><strong>注意</strong>：模块可能被其它模块依赖，或正在被应用程序使用，此时无法卸载该模块。依然可以通过<code>-f</code>参数强制卸载，不过并不推荐这么做。</p>
</blockquote>
<h2 id="modprobe"><a class="header" href="#modprobe">modprobe</a></h2>
<p>可以加载、卸载内核模块，并且可以自动解决模块间的依赖关系，将某模块所依赖的其它模块全部加载。</p>
<blockquote>
<p><strong>注意</strong>：因为<code>modprobe</code>处理模块时会忽略模块路径，所以模块必须按照<code>make modues_install</code>方式安装（<em>即模块必须放在<code>/lib/modules/$(uname -r)</code>目录下</em>），并拥有正确的<code>/lib/modules/$(uname -r)/modules.dep</code>文件，<code>modprobe</code>命令会根据该文件来解析依赖关系。</p>
</blockquote>
<h2 id="mknod"><a class="header" href="#mknod">mknod</a></h2>
<p>加载驱动模块到内核之后，需要通过<code>mknod</code>为驱动建立对应的设备节点，否则无法通过驱动来操作设备。 命令使用格式为<code>mknod 设备名 设备类型 主设备号 次设备号</code>，下面命令创建了一个字符设备 led，主设备号为 231，次设备号为 0。</p>
<pre><code class="language-sh">➜  mknod /dev/led c 231 0
</code></pre>
<h2 id="sync"><a class="header" href="#sync">sync</a></h2>
<p>Linux 对文件的操作都是先保存在缓存中，并没有立即写入磁盘，通常需要经系统调度后才会写入磁盘，当然这里也可以使用<code>sync</code>命令强制进行写入。</p>
<pre><code class="language-sh">➜  sync
</code></pre>
<h2 id="find"><a class="header" href="#find">find</a></h2>
<p>搜索目录当中的<strong>文件</strong>，命令格式为<code>$find 路径 –选项 目标文件</code>。</p>
<ul>
<li><code>-name</code> 根据文件名称；</li>
<li><code>-type</code> 根据文件类型；</li>
<li><code>-user</code> 根据文件拥有者；</li>
</ul>
<pre><code class="language-sh">➜  find -name index.html
./.deploy_git/2017/08/30/article/2017/guiyang-big-data/index.html
./.deploy_git/2017/08/27/article/2017/chengdu-real-estate-1/index.html
./.deploy_git/2017/08/27/article/2017/chengdu-real-estate-2/index.html
./.deploy_git/2017/08/27/article/2017/chengdu-real-estate-3/index.html
... ... ...
</code></pre>
<h2 id="locate"><a class="header" href="#locate">locate</a></h2>
<p>通过文件名称在索引数据库中快速查找文件的位置。</p>
<pre><code class="language-sh">➜  locate /etc/host
/etc/host.conf
/etc/hostname
/etc/hosts
/etc/hosts.allow
/etc/hosts.deny
</code></pre>
<blockquote>
<p><strong>注意</strong>：大部分 Linux 发行版的索引数据库都放置在 crontab 中定时执行更新，但是也可以通过<code>sudo updatedb</code>手动的更新。</p>
</blockquote>
<h2 id="grep"><a class="header" href="#grep">grep</a></h2>
<p>通过正则表达式查询指定文件当中的目标字符串，下面的代码用于查询以字符串<code>interface eth0</code>开头的行内容：</p>
<pre><code class="language-sh">➜  grep &quot;^interface eth0\b&quot; &quot;/etc/dhcpcd.conf&quot;
interface eth0
</code></pre>
<p>除此之外，还可以用于查询某个目录下文件中的<strong>字符串</strong>，下面的例子查询<code>&quot;hank&quot;</code>字符串被<code>./source</code>目录下的哪些文件所引用。</p>
<ul>
<li><code>-R</code> 参数用于在指定目录下进行递归查找。</li>
</ul>
<pre><code class="language-sh">➜  grep &quot;hank&quot; -R ./source
source/linux/command.md:drwxrwxr-x   9 hank hank   4096 8月  31 00:02 .
source/linux/command.md:-rw-rw-r--   1 hank hank   1966 8月  26 18:56 _config.yml
source/linux/command.md:-rw-rw-r--   1 hank hank 505845 8月  31 00:02 db.json
source/linux/command.md:drwxrwxr-x   8 hank hank   4096 8月  31 00:18 .git
source/linux/command.md:-rw-rw-r--   1 hank hank     83 8月  26 02:29 .gitignore
source/linux/command.md:-rw-rw-r--   1 hank hank    277 8月  24 03:15 index.html
... ... ...
</code></pre>
<h2 id="env--printenv"><a class="header" href="#env--printenv">env / printenv</a></h2>
<p>查看系统当前的环境变量设置，下面例表是一些常见环境变量：</p>
<ul>
<li><code>PATH</code>：指定 Shell 执行时会到哪些目录寻找应用;</li>
<li><code>TERM</code>：指定系统终端;</li>
<li><code>SHELL</code>：当前用户 Shell 类型。</li>
<li><code>HOME</code>：当前用户主目录;</li>
<li><code>LOGNAME</code>：当前用户的登录名;</li>
<li><code>USER</code>：当前用户名;</li>
<li><code>HISTSIZE</code>：历史命令记录数;</li>
</ul>
<blockquote>
<p><strong>注意</strong>：Shell 中可以通过<code>$环境变量名</code>来引用指定的环境变量信息。</p>
</blockquote>
<p>如下是 Linux 环境变量修改的 3 种方式及其区别：</p>
<ul>
<li><code>/etc/profile</code> 对本机全部用户有效；</li>
<li><code>~/.bashrc</code> 对当前用户有效；</li>
<li><code>export 新增环境变量</code> 仅对当前打开的终端有效；</li>
</ul>
<pre><code class="language-sh">➜  echo $PATH
/home/hank/bin:/home/hank/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/opt/jdk/bin:/opt/nodejs/bin:/opt/mongodb/bin
➜  PATH=$PATH:/workspace/linux
➜  printenv PATH
/home/hank/bin:/home/hank/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/opt/jdk/bin:/opt/nodejs/bin:/opt/mongodb/bin:/workspace/linux
</code></pre>
<h3 id="env"><a class="header" href="#env">env</a></h3>
<p>该命令用于在一个被修改的环境变量下运行程序，也可用于打印全部或指定的环境变量（通过<code>env $PATH</code>）。</p>
<pre><code class="language-sh">➜  env
... ... ...
PATH=/home/hank/bin:/home/hank/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/opt/jdk/bin:/opt/nodejs/bin:/opt/mongodb/bin
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh
TERM=xterm
HOME=/home/hank
... ... ...
</code></pre>
<h3 id="printenv"><a class="header" href="#printenv">printenv</a></h3>
<p>专门用于打印全部或指定的环境变量（通过<code>printenv PATH</code>）。</p>
<pre><code class="language-sh">➜  printenv PATH
/home/hank/bin:/home/hank/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/opt/jdk/bin:/opt/nodejs/bin:/opt/mongodb/bin
</code></pre>
<blockquote>
<p><strong>注意</strong>：直接在命令行输入<code>$PATH</code>也可打印环境变量。</p>
</blockquote>
<h2 id="su--sudo"><a class="header" href="#su--sudo">su / sudo</a></h2>
<h3 id="su"><a class="header" href="#su">su</a></h3>
<p>更改用户 ID 或切换到 root 用户。</p>
<pre><code class="language-sh">➜  su
➜  whoami
root
➜  exit
➜  whoami
hank
</code></pre>
<blockquote>
<p><strong>注意</strong>：切换到 <strong>root</strong> 用户后，可以通过<code>exit</code>命令进行退出。</p>
</blockquote>
<p>采用参数选项 <code>-</code>、<code>-l</code>、<code>--login</code> 可以将用户和 Shell 环境同时切换至<code>root</code>。</p>
<pre><code class="language-sh">➜  su -l
</code></pre>
<h3 id="sudo"><a class="header" href="#sudo">sudo</a></h3>
<p>临时获取 root 用户权限。</p>
<pre><code class="language-sh">➜  sudo vim /etc/sudoers
</code></pre>
<blockquote>
<p><strong>注意</strong>：<code>sudo</code>命令需要将用户添加到<code>sudoer</code>用户组当中，一般情况下可以修改<code>/etc/sudoers</code>文件。</p>
</blockquote>
<h2 id="uname"><a class="header" href="#uname">uname</a></h2>
<p>打印系统信息。</p>
<ul>
<li><code>-a</code> 打印全部的系统信息。</li>
</ul>
<pre><code class="language-sh">➜  uname -a
Linux hank-linux 4.12.2-041202-generic #201707150832 SMP Sat Jul 15 12:34:02 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>
<h2 id="who--whoami"><a class="header" href="#who--whoami">who / whoami</a></h2>
<p>用户信息显示相关的两条命令。</p>
<h3 id="who"><a class="header" href="#who">who</a></h3>
<p>显示当前登陆到系统的所有用户。</p>
<pre><code class="language-sh">➜  who
hank     tty7         2017-09-03 12:15 (:0)
hank     pts/0        2017-09-03 12:15 (hank-linux)
hank     pts/1        2017-09-03 23:08 (hank-linux)
hank     pts/2        2017-09-03 23:09 (hank-linux)
hank     pts/3        2017-09-03 23:14 (hank-linux)
hank     pts/4        2017-09-03 23:15 (hank-linux)
</code></pre>
<h3 id="whoami"><a class="header" href="#whoami">whoami</a></h3>
<p>打印当前登陆用户的名称。</p>
<pre><code class="language-sh">➜  whoami
hank
</code></pre>
<h2 id="id"><a class="header" href="#id">id</a></h2>
<p>打印用户以及组的 ID。</p>
<pre><code class="language-sh">➜  id root
uid=0(root) gid=0(root) 组=0(root)
</code></pre>
<h2 id="groups"><a class="header" href="#groups">groups</a></h2>
<p>显示用户所属组的详细信息。</p>
<pre><code class="language-sh">➜  groups hank
hank : hank adm cdrom sudo dip plugdev lpadmin sambashare vboxusers
</code></pre>
<h2 id="passwd"><a class="header" href="#passwd">passwd</a></h2>
<p>更改指定用户密码。</p>
<pre><code class="language-sh">➜  ~ passwd hank
更改 hank 的密码。
</code></pre>
<h2 id="useradd--usermod--userdel"><a class="header" href="#useradd--usermod--userdel">useradd / usermod / userdel</a></h2>
<p>添加、设置、删除用户。</p>
<pre><code class="language-sh">➜  ~ sudo useradd uinika
➜  ~ sudo passwd uinika
输入新的 UNIX 密码：
➜  ~ sudo userdel uinika
</code></pre>
<ul>
<li><code>/etc/passwd</code>：用户账户信息文件。</li>
</ul>
<pre><code class="language-sh">hank:x:1000:1000:hank.zheng,,,:/home/hank:/usr/bin/zsh
uinika:x:1001:1001::/home/uinika:
</code></pre>
<ul>
<li><code>/etc/shadow</code>：用户账户加密信息文件。</li>
</ul>
<pre><code class="language-sh">hank:$6$qNevDR2S$zGTwRTbPTlB72L8Qj4gbLvFmFnX/UMVP729FYKQEQevjibRoiSYxaprsu1wvdWN3s5VaP0zq581pYTQATMAA0.:17362:0:99999:7:::
uinika:$6$1vI1oFXa$0NDka/ceb6QMSkf9Z8M7S/UUO0dNAEnj2fFP7p2LKlEY.9tVyKxJ4AmRiUevUSzLc/fqyUF.PNQ91Fj4GYXw9.:17412:0:99999:7:::
</code></pre>
<h2 id="groupadd--groupmod--groupdel"><a class="header" href="#groupadd--groupmod--groupdel">groupadd / groupmod / groupdel</a></h2>
<p>添加、设置、删除组。</p>
<pre><code class="language-sh">➜  ~ sudo groupadd zheng
➜  ~ sudo groupmod -g 8888 zheng  // 修改组ID为8888
➜  ~ sudo groupdel zheng
</code></pre>
<ul>
<li><code>/etc/group</code>：组账户信息文件。</li>
</ul>
<pre><code class="language-sh">hank:x:1000:
vboxusers:x:132:hank
zheng:x:8888:
</code></pre>
<ul>
<li><code>/etc/gshadow</code>：组账户加密信息文件。</li>
</ul>
<pre><code class="language-sh">hank:!::
vboxusers:!::hank
zheng:!::
</code></pre>
<h2 id="ps--top--kill"><a class="header" href="#ps--top--kill">ps / top / kill</a></h2>
<p>Linux 进程相关的操作。</p>
<h3 id="ps"><a class="header" href="#ps">ps</a></h3>
<p>显示一个当前 Linux 操作系统所有进程的快照。</p>
<ul>
<li><code>-ef</code> 查看所有进程的 PID（<em>进程号</em>）、命令详细目录、执行者等信息。</li>
</ul>
<pre><code class="language-sh">➜  ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 00:03 ?        00:00:01 /sbin/init splash
root         2     0  0 00:03 ?        00:00:00 [kthreadd]
root         4     2  0 00:03 ?        00:00:00 [kworker/0:0H]
... ... ...
</code></pre>
<p>采用如下命令可以查看以<code>.jar</code>为后缀名的 Java 服务程序进程号：</p>
<pre><code class="language-sh">➜  ps -ef | grep server.jar
root       2775      1  3 16:16 pts/0    00:00:38 java -jar server.jar
root       3781   1787  0 16:33 pts/0    00:00:00 grep --color=auto server.jar
</code></pre>
<p>如果忘记<code>.jar</code>文件的名称，则可以通过<code>grep java</code>查看与 Java 相关的所有服务进程：</p>
<pre><code class="language-sh">➜  ps -ef | grep java
root       2775      1  3 16:16 pts/0    00:00:38 java -jar server.jar
root       3820   1787  0 16:33 pts/0    00:00:00 grep --color=auto java
</code></pre>
<ul>
<li><code>-aux</code> 除显示进程信息外，还显示 CPU 及内存占用率、进程状态。</li>
</ul>
<pre><code class="language-sh">➜  ps -aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.1  0.0 185672  6156 ?        Ss   00:03   0:01 /sbin/init splash
root         2  0.0  0.0      0     0 ?        S    00:03   0:00 [kthreadd]
root         4  0.0  0.0      0     0 ?        S&lt;   00:03   0:00 [kworker/0:0H]
... ... ...
</code></pre>
<blockquote>
<p><strong>注意</strong>：管道是 Linux 进程间通信的重要方式，Shell 命令行中，管道符<code>|</code>用于连接两个进程的输出与输入。</p>
</blockquote>
<pre><code class="language-sh">➜  blog git:(master) ✗ ps -ef | grep python
hank      1598  1326  0 00:04 ?        00:00:00 /usr/bin/python3 /usr/bin/cinnamon-launcher
hank      1638  1326  0 00:04 ?        00:00:00 /usr/bin/python3 /usr/bin/cinnamon-killer-daemon
hank      1777  1326  0 00:04 ?        00:00:00 /usr/bin/python /usr/bin/blueberry-tray
</code></pre>
<h3 id="top"><a class="header" href="#top">top</a></h3>
<p>动态显示 Linux 进程信息。</p>
<pre><code class="language-sh">➜  top

top - 00:36:54 up 33 min,  2 users,  load average: 0.70, 0.60, 0.48
Tasks: 223 total,   1 running, 221 sleeping,   0 stopped,   1 zombie
%Cpu(s):  1.7 us,  0.7 sy,  0.0 ni, 97.6 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 12110732 total,  9707752 free,  1079692 used,  1323288 buff/cache
KiB Swap: 12389372 total, 12389372 free,        0 used. 10461888 avail Mem

PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
1167 root      20   0  430556  90728  64768 S   2.3  0.7   1:09.62 Xorg
1639 hank      20   0  551256  56188  35188 S   2.3  0.5   0:21.21 python2
1613 hank      20   0 2158736 198220  68256 S   1.0  1.6   1:07.52 cinnamon
... ... ...
</code></pre>
<h3 id="kill"><a class="header" href="#kill">kill</a></h3>
<p>发送一个信号给进程，可以使用信号名或数字，因此下面例子中的 2 条命令作用相同。</p>
<pre><code class="language-sh">➜  kill -9 1639
➜  kill -SIGKILL 1639
</code></pre>
<h2 id="which--whereis"><a class="header" href="#which--whereis">which / whereis</a></h2>
<p>查询 Linux 命令所在的位置。</p>
<h3 id="which"><a class="header" href="#which">which</a></h3>
<p>查询指定 Linux 命令文件的位置。</p>
<pre><code class="language-sh">➜  which atom
/usr/bin/atom
</code></pre>
<h3 id="whereis"><a class="header" href="#whereis">whereis</a></h3>
<p>找出指定 Linux 命令所对应的<code>binary</code>、<code>source</code>、<code>manual page</code>文件。</p>
<pre><code class="language-sh">➜  whereis tar
tar: /usr/lib/tar /bin/tar /usr/include/tar.h /usr/share/man/man1/tar.1.gz
</code></pre>
<h2 id="whois"><a class="header" href="#whois">whois</a></h2>
<p>查询域名注册的详细信息。</p>
<pre><code class="language-sh">➜  whois chengdu.gov.cn
Domain Name: chengdu.gov.cn
ROID: 20021209s10061s00002738-cn
Domain Status: ok
Registrant ID: s77d811mb88kmg
Registrant: 成都市人民政府行政效能建设办公室（成都市人民政府政务公开办公室）
Registrant Contact Email: cpletterbox@126.com
Sponsoring Registrar: 北京新网数码信息技术有限公司
Name Server: ns1.alidns.com
Name Server: ns2.alidns.com
Registration Time: 2001-06-28 00:00:00
Expiration Time: 2018-06-28 00:00:00
DNSSEC: unsigned
</code></pre>
<h2 id="crontab"><a class="header" href="#crontab">crontab</a></h2>
<p>Linux 的定时任务通常由守护进程<strong>cron</strong>处理，cron 会读取包含命令行及其调用时间的配置文件<strong>crontab 文件</strong>（<em>英文 crontab 是指定时任务</em>），该命令就是用来对 crontab 配置文件执行列出、安装、删除等维护操作的。</p>
<pre><code class="language-sh">➜  ps -ef | grep cron
root       933     1  0 00:03 ?        00:00:00 /usr/sbin/cron -f
hank     11203  8236  0 02:02 pts/1    00:00:00 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn cron
</code></pre>
<p>通过<code>crontab -u 用户名 file</code>命令设置定时执行指定的 file 命令文件。</p>
<pre><code class="language-sh">➜  crontab -u hank ./test.task
</code></pre>
<p>缺省文件名的情况下，使用如下参数可以管理<code>crontab</code>。</p>
<ul>
<li><code>-e</code> 编辑用户的 crontab；</li>
<li><code>-l</code> 列出用户的 crontab；</li>
<li><code>-r</code> 删除用户的 crontab；</li>
<li><code>-i</code> 删除 crontab 前弹出提示；</li>
</ul>
<p>下面的命令例出了用户<code>hank</code>下的定时任务。</p>
<pre><code class="language-sh">➜  crontab -u hank -l
no crontab for hank
</code></pre>
<p>下列示例用于执行<code>crontab -e</code>之后，为当前用户添加 4 个定时任务：</p>
<pre><code class="language-sh"># 凌晨 0 点 0 分停止服务
0 0 * * * /opt/server/test stop
# 凌晨 0 点 1 分执行清理
0 1 * * * /opt/server/test clean
# 凌晨 0 点 2 分重启服务
0 2 * * * /opt/server/test restart
# 系统重启之后自动打开服务
@reboot   /opt/server/test start
</code></pre>
<h2 id="tar"><a class="header" href="#tar">tar</a></h2>
<p>Linux 打包（<em>将多个文件合并为大文件</em>）或压缩（<em>将大文件压缩为体积更小的文件</em>）文件的命令。</p>
<h3 id="压缩-cvf-系列参数"><a class="header" href="#压缩-cvf-系列参数">压缩-cvf 系列参数</a></h3>
<ul>
<li><code>-cvf</code> 打包文件，需要压缩较多数量的文件时，将文件打包再进行压缩会更加高效；</li>
<li><code>-zcvf</code> 打包后压缩为<code>gzip</code>格式，速度快压缩率低；</li>
<li><code>-jcvf</code> 打包后压缩为<code>bzip2</code>格式，速度和压缩率适中；</li>
<li><code>-Jcvf</code> 打包后压缩为<code>xz</code>格式，压缩率最高，但是速度较慢；</li>
</ul>
<pre><code class="language-sh">➜  tar -cvf bundle.tar ./files
./files/
./files/file1
./files/file4
./files/file5
./files/file2
./files/file3
➜  tar -zcvf bundle.tar.gz ./files
./files/
./files/file1
./files/file4
./files/file5
./files/file2
./files/file3
➜  tar -jcvf bundle.tar.bz2 ./files
./files/
./files/file1
./files/file4
./files/file5
./files/file2
./files/file3
➜  tar -Jcvf bundle.tar.xz ./files
./files/
./files/file1
./files/file4
./files/file5
./files/file2
./files/file3
➜  ls -al
-rw-rw-r-- 1 hank hank 10240 9月  10 21:27 bundle.tar
-rw-rw-r-- 1 hank hank   195 9月  10 21:27 bundle.tar.bz2
-rw-rw-r-- 1 hank hank   189 9月  10 21:27 bundle.tar.gz
-rw-rw-r-- 1 hank hank   216 9月  10 21:27 bundle.tar.xz
drwxrwxr-x 2 hank hank  4096 9月  10 19:21 files
</code></pre>
<h3 id="解压-xvf-系列参数"><a class="header" href="#解压-xvf-系列参数">解压-xvf 系列参数</a></h3>
<ul>
<li><code>-xvf</code> 解包<code>tar</code>格式文件到当前目录；</li>
<li><code>-zxvf</code> 解包并解压缩<code>gzip</code>格式文件；</li>
<li><code>-jxvf</code> 解包并解压缩解压<code>bzip2</code>格式文件；</li>
<li><code>-Jxvf</code> 解包并解压缩解压<code>xz</code>格式文件；</li>
</ul>
<pre><code class="language-sh">➜  tar -xvf bundle.tar
./bundle/
./bundle/file1
./bundle/file4
./bundle/file5
./bundle/file2
./bundle/file3

➜  tar -zxvf bundle.tar.gz
./bundle/
./bundle/file1
./bundle/file4
./bundle/file5
./bundle/file2
./bundle/file3

➜  tar -jxvf bundle.tar.bz2
./bundle/
./bundle/file1
./bundle/file4
./bundle/file5
./bundle/file2
./bundle/file3

➜  tar -Jxvf bundle.tar.xz
./bundle/
./bundle/file1
./bundle/file4
./bundle/file5
./bundle/file2
./bundle/file3

➜  ls
bundle  bundle.tar  bundle.tar.bz2  bundle.tar.gz  bundle.tar.xz
</code></pre>
<h3 id="解压-c-参数"><a class="header" href="#解压-c-参数">解压-C 参数</a></h3>
<p>使用解压参数后添加<code>-C 目录</code>可以将文件解压至指定目录。</p>
<pre><code class="language-sh">➜  ls
bundle.tar.xz  test
➜  tar -Jxvf bundle.tar.xz -C ./test
./bundle/
./bundle/file1
./bundle/file4
./bundle/file5
./bundle/file2
./bundle/file3
➜  tree
├── bundle.tar.xz
└── test
    └── bundle
        ├── file1
        ├── file2
        ├── file3
        ├── file4
        └── file5
</code></pre>
<blockquote>
<p><strong>注意</strong>：指定的目录必须是已经存在的。</p>
</blockquote>
<h2 id="zip--unzip"><a class="header" href="#zip--unzip">zip / unzip</a></h2>
<p>压缩或者解压 Windows 下常用的<strong>zip 格式</strong>压缩文件。</p>
<h3 id="zip"><a class="header" href="#zip">zip</a></h3>
<p>将指定文件压缩为 zip 格式。</p>
<pre><code class="language-sh">➜  zip bundle.zip ./bundle
  adding: bundle/ (stored 0%)

➜  ls
bundle  bundle.zip
</code></pre>
<p>采用<code>-r</code>参数可以将指定的文件夹压缩为 zip 格式。</p>
<pre><code class="language-sh">➜  zip -r static.zip ./static
  adding: static/ (stored 0%)

➜  ls
static  static.zip
</code></pre>
<h3 id="unzip"><a class="header" href="#unzip">unzip</a></h3>
<p>解压 zip 格式的压缩文件。</p>
<ul>
<li><code>-d</code> 解压到指定目录。</li>
</ul>
<pre><code class="language-sh">➜  ls
bundle.zip

➜  unzip bundle.zip -d ./test
Archive:  bundle.zip
   creating: ./test/bundle/

➜  tree
├── bundle.zip
└── test
    └── bundle
</code></pre>
<h2 id="rar--unrar"><a class="header" href="#rar--unrar">rar / unrar</a></h2>
<p>压缩或者解压 Windows 下常用的<strong>rar 格式</strong>压缩文件。</p>
<h3 id="rar"><a class="header" href="#rar">rar</a></h3>
<p>压缩指定文件为<code>rar</code>格式。</p>
<ul>
<li><code>a</code> 增加指定文件到<code>rar</code>压缩包当中；</li>
</ul>
<pre><code class="language-sh">➜  rar a test.rar ./bundle

RAR 5.30 beta 2   Copyright (c) 1993-2015 Alexander Roshal   4 Aug 2015
Trial version             Type RAR -? for help
Evaluation copy. Please register.
Creating archive test.rar

Adding    ./bundle/file1                                              OK
Adding    ./bundle/file4                                              OK
Adding    ./bundle/file5                                              OK
Adding    ./bundle/file2                                              OK
Adding    ./bundle/file3                                              OK
Adding    ./bundle                                                    0%
Done
➜  ls
bundle  test.rar
</code></pre>
<h3 id="unrar"><a class="header" href="#unrar">unrar</a></h3>
<p>解压 rar 格式的压缩包。</p>
<ul>
<li><code>e</code> 解压文件至当前目录；</li>
</ul>
<pre><code class="language-sh">➜  unrar e test.rar ./demo

UNRAR 5.30 beta 2 freeware      Copyright (c) 1993-2015 Alexander Roshal
Extracting from test.rar

Extracting  ./demo/file1                                              OK
Extracting  ./demo/file4                                              OK
Extracting  ./demo/file5                                              OK
Extracting  ./demo/file2                                              OK
Extracting  ./demo/file3                                              OK
All OK
</code></pre>
<h2 id="7zr"><a class="header" href="#7zr">7zr</a></h2>
<p>即 Windows 中的开源高压缩率工具<strong>7z</strong>。</p>
<ul>
<li><code>a</code> 添加文件至压缩包；</li>
</ul>
<pre><code class="language-sh">➜  7zr a test

7-Zip (A) [64] 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18
p7zip Version 9.20 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,4 CPUs)
Scanning
Updating archive test.7z
Compressing  test.7z
Everything is Ok
</code></pre>
<ul>
<li><code>x</code> 解压到完整路径；</li>
</ul>
<pre><code class="language-sh">➜  7zr x test.7z

7-Zip (A) [64] 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18
p7zip Version 9.20 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,4 CPUs)

Processing archive: test.7z

Extracting  test/file1
Extracting  test/file2
Extracting  test/file3
Extracting  test/file4
Extracting  test/file5
Extracting  test

Everything is Ok

Folders: 1
Files: 5
Size:       0
Compressed: 150
</code></pre>
<h2 id="df-1"><a class="header" href="#df-1">df</a></h2>
<p>对文件进行逐行比较。</p>
<ul>
<li><code>-c</code> 输出被拷贝的上下文和差异标记；</li>
</ul>
<pre><code class="language-sh">➜  diff -c test1.c test2.c
*** test1.c	2017-09-11 04:12:28.000000000 +0800
--- test2.c	2017-09-11 04:12:20.000000000 +0800
***************
*** 1,5 ****
  #include &lt;stdio.h&gt;

  void main() {
!   printf(&quot;Hello Hank!&quot;);
  };
\ 文件尾没有 newline 字符
--- 1,5 ----
  #include &lt;stdio.h&gt;

  void main() {
!   printf(&quot;Hello Uinika!&quot;);
  };
\ 文件尾没有 newline 字符
</code></pre>
<ul>
<li><code>-u</code> 在统一的上下文中输出差异内容；</li>
</ul>
<pre><code class="language-sh">➜  diff -u test1.c test2.c
--- test1.c	2017-09-11 04:12:28.000000000 +0800
+++ test2.c	2017-09-11 04:12:20.000000000 +0800
@@ -1,5 +1,5 @@
 #include &lt;stdio.h&gt;

 void main() {
-  printf(&quot;Hello Hank!&quot;);
+  printf(&quot;Hello Uinika!&quot;);
 };
\ 文件尾没有 newline 字符
</code></pre>
<ul>
<li><code>缺省参数</code> 显示前一个文件如何转换为后一个文件，常用于输出 patch 补丁；</li>
</ul>
<pre><code class="language-sh">➜  diff test1.c test2.c
4c4
&lt;   printf(&quot;Hello Hank!&quot;);
---
&gt;   printf(&quot;Hello Uinika!&quot;);
</code></pre>
<blockquote>
<p><strong>注意</strong>：符号<code>&lt;</code>表示该行代码从目标文件移出，而<code>&gt;</code>则表示在该行插入指定的内容。</p>
</blockquote>
<h2 id="patch"><a class="header" href="#patch">patch</a></h2>
<p>在原始文件上应用一个 diff 文件。</p>
<ul>
<li><code>-b</code> 为目标文件生成备份文件；</li>
</ul>
<pre><code>➜  diff test1.c test2.c &gt;&gt; demo.patch
➜  ls
demo.patch  test1.c  test2.c
➜  patch -b ./test1.c &lt; demo.patch
patching file ./test1.c
➜  ls
demo.patch  test1.c  test1.c.orig  test2.c
</code></pre>
<h2 id="man"><a class="header" href="#man">man</a></h2>
<p>Linux 在线参考手册。</p>
<ul>
<li><code>-k</code> 搜索关键词对应的手册概述并显示所有匹配结果；</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ man -k printf
asprintf (3)         - print to allocated string
dprintf (3)          - formatted output conversion
fprintf (3)          - formatted output conversion
fwprintf (3)         - formatted wide-character output conversion
printf (1)           - format and print data
printf (3)           - formatted output conversion
snprintf (3)         - formatted output conversion
sprintf (3)          - formatted output conversion
swprintf (3)         - formatted wide-character output conversion
vasprintf (3)        - print to allocated string
vdprintf (3)         - formatted output conversion
vfprintf (3)         - formatted output conversion
vfwprintf (3)        - formatted wide-character output conversion
vprintf (3)          - formatted output conversion
vsnprintf (3)        - formatted output conversion
vsprintf (3)         - formatted output conversion
vswprintf (3)        - formatted wide-character output conversion
vwprintf (3)         - formatted wide-character output conversion
wprintf (3)          - formatted wide-character output conversion
</code></pre>
<ul>
<li><code>-f</code> 等同于 whatis，显示来自手册页的简短说明；</li>
</ul>
<pre><code class="language-sh">➜  blog git:(master) ✗ man -f printf
printf (1)           - format and print data
printf (3)           - formatted output conversion
</code></pre>
<h3 id="目录结构"><a class="header" href="#目录结构">目录结构</a></h3>
<ol>
<li>标准用户命令（可执行程序或者 Shell 命令）；</li>
<li>系统调用（内核提供的函数）；</li>
<li>库调用（程序库当中的函数）；</li>
<li>特殊文件（设备文件相关信息，通常位于<code>/dev</code>）；</li>
<li>文件格式和规范（例如<code>/etc/passwd</code>）；</li>
<li>游戏；</li>
<li>杂项（包括宏包与规范，如 <code>man(7)</code>，<code>groff(7)</code>）；</li>
<li>系统管理命令(通常只针对<code>root</code>用户)；</li>
<li>内核例程；</li>
</ol>
<pre><code class="language-sh">➜  man 1 ls
➜  man 3 printf
</code></pre>
<h3 id="支持操作"><a class="header" href="#支持操作">支持操作</a></h3>
<ul>
<li><code>空格键</code>（向后翻屏）、<code>b</code>（向前翻屏）；</li>
<li><code>回车键</code>（向后翻行）、<code>k</code>（向前翻行）；</li>
<li><code>?关键字</code>（向前查找）、<code>N</code>（前一个）；</li>
<li><code>/关键字</code>（向后查找）、<code>n</code>（下一个）；</li>
<li><code>q</code>（退出）；</li>
</ul>
<blockquote>
<p><strong>注意</strong>：在<code>man</code>当中按下<code>m</code>键，再按下<code>字母 a</code>可以标记一个<code>a</code>书签，浏览到页面其它部分时，可以通过按下<code>'</code>键和<code>字母a</code>回到这个<code>a</code>书签，添加的书签在退出后就会失效。此外，在<code>man</code>中输入感叹号<code>！</code>可以临时执行 Linux 命令，命令执行完成后按<code>回车键</code>即可返回 man。</p>
</blockquote>
<h2 id="nohup"><a class="header" href="#nohup">nohup</a></h2>
<p>Linux 命令行模式下，如果在命令的结束位置添加<code>&amp;</code>符号，则该命令将会在当前控制台会话的后台进行执行，会话关闭以后命令就会停止。</p>
<pre><code class="language-sh">➜  tail -f package.json &amp;

[4] 10025
    &quot;hexo-generator-search&quot;: &quot;^2.4.0&quot;,
    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,
    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,
    &quot;hexo-server&quot;: &quot;^1.0.0&quot;,
    &quot;hexo-symbols-count-time&quot;: &quot;^0.6.3&quot;
  },
  &quot;devDependencies&quot;: {}
}
</code></pre>
<p>如果需要在会话关闭以后，执行一个不受挂起操作影响的服务，则可以通过<code>nohup</code>命令来完成，其执行结果将会输出至命令执行目录下的<code>nohup.out</code>文件：</p>
<pre><code class="language-sh">➜  nohup tail -f package.json &amp;

[3] 9906
nohup: 忽略输入并把输出追加到'nohup.out'
</code></pre>
<h2 id="curl"><a class="header" href="#curl">curl</a></h2>
<p><code>curl</code>是一款用于使用 URL 传输数据的命令行工具和库。</p>
<pre><code class="language-sh">➜  curl https://www.bing.com

&lt;html&gt;&lt;head&gt;&lt;title&gt;Object moved&lt;/title&gt;&lt;/head&gt;&lt;body&gt;
&lt;h2&gt;Object moved to &lt;a href=&quot;https://cn.bing.com/&quot;&gt;here&lt;/a&gt;.&lt;/h2&gt;
&lt;/body&gt;&lt;/html&gt;
</code></pre>
<h2 id="systemctl"><a class="header" href="#systemctl">systemctl</a></h2>
<p><strong>Systemd</strong>是一个系统管理守护进程、工具、库的集合，其作用是用于集中管理和配置 Linux 操作系统。而<strong>Systemctl</strong>只是一个<strong>Systemd</strong>工具，主要负责管理<code>systemd</code>程序相关的服务。</p>
<p>支持<strong>Systemd</strong>的程序安装时，会自动向<code>/etc/systemd/system</code>或者<code>/usr/lib/systemd/system</code>目录添加<code>.service</code>服务配置文件：</p>
<pre><code class="language-sh">[Unit]      # 定义启动顺序与依赖关系
Description=Demo Service
Requires=syslog.socket
Documentation=man:rsyslogd(8)
Documentation=https://uinika.gitee.io/

[Service]   # 定义如何启动当前服务
Type=notify
ExecStart=/usr/sbin/rsyslogd -n -iNONE
StandardOutput=null
Restart=on-failure

# Increase the default a bit in order to allow many simultaneous
# files to be monitored, we might need a lot of fds.
LimitNOFILE=16384

[Install]   # 定义如何安装这个配置文件
WantedBy=multi-user.target
Alias=demo.service
</code></pre>
<p>下面的示例命令当中，假设已经向系统添加了<code>demo.service</code>文件：</p>
<pre><code class="language-sh">➜  sudo systemctl enable demo.service   # 开机启动

➜  sudo systemctl start demo.service    # 启动服务

➜  sudo systemctl restart demo.service  # 重启服务

➜  sudo systemctl stop demo.service     # 停止服务

➜  sudo systemctl kill demo.service     # 当服务停止命令失去响应时，可用于向服务发送 kill 信号
➜  sudo systemctl status demo.service   # 服务状态

● demo.service - Demo service
   # Loaded: 服务配置文件的位置，以及是否设置为了开机自启动；
   Loaded: loaded (/etc/systemd/system/demo.service; enabled; vendor preset: enabled)
   # Active: 当前运行状态
   Active: failed (Result: exit-code) since Fri 2020-07-17 17:16:17 CST; 1h 40min ago
   # Process: 服务的进程信息
   Process: 31202 ExecStart=/bin/bash -c java -noverify $JVM_ARGS -XX:MaxMetaspaceSize=256M -X
   # Main PID: 服务的主进程 ID
   Main PID: 31202 (code=exited, status=143)
   # Status: 应用服务自身提供的状态
   Status: &quot;Total requests: 1; Current requests/sec: 0; Current traffic:   0 B/sec&quot;
   # CGroup: 服务的子进程
   CGroup: /system.slice/httpd.service
           ├─4350 /usr/sbin/httpd -DFOREGROUND
           ├─4351 /usr/sbin/httpd -DFOREGROUND
           └─4352 /usr/sbin/httpd -DFOREGROUND
# 服务日志
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.springframework.context.support.
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.springframework.jmx.export.MBean
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.quartz.core.QuartzScheduler.shut
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.quartz.core.QuartzScheduler.stan
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.quartz.core.QuartzScheduler.shut
7月 17 17:16:17 raspberrypi bash[31202]: 17:16:17 INFO   org.apache.shiro.session.mgt.Abstrac
7月 17 17:16:17 raspberrypi systemd[1]: demo.service: Main process exited, code=exited,
7月 17 17:16:17 raspberrypi systemd[1]: demo.service: Failed with result 'exit-code'.
</code></pre>
<p>@来源：<a href="https://uinika.gitee.io/Linux/Command/">Linux 常用命令行速查手册 | Bit by bit (gitee.io)</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../shell/bash_shell编程实践.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../C++学习/C++基础带目录.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../shell/bash_shell编程实践.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../C++学习/C++基础带目录.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
